<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlobalScript - Belajar Menulis Dunia & Nusantara</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Babel untuk JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts (Updated with Rejang & Kawi) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&family=Noto+Sans+Arabic:wght@400;700&family=Noto+Sans+Thai:wght@400;700&family=Noto+Sans+Javanese&family=Noto+Sans+JP:wght@400;700&family=Noto+Sans+KR:wght@400;700&family=Noto+Serif+TC:wght@400;700&family=Noto+Sans+Buginese&family=Noto+Sans+Batak&family=Noto+Serif+Balinese&family=Noto+Sans+Sundanese&family=Noto+Sans+Rejang&family=Noto+Sans+Kawi&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Noto Sans', sans-serif; background-color: #E9F7EF; overflow: hidden; }
        
        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background-color: #cbd5e1; border-radius: 20px; }
        
        /* Print Styles */
        @media print {
            @page { 
                size: landscape; 
                margin: 5mm; /* Margin diperkecil agar muat pas 2 halaman */
            }

            html, body, #root { 
                height: auto !important; 
                overflow: visible !important; 
                background: white !important;
                -webkit-print-color-adjust: exact;
                display: block !important;
                position: static !important;
            }

            header, aside:not(.notebook-section), .tools-panel, .action-buttons, .canvas-tools, .canvas-container, .audio-btn, .mobile-menu-btn, .lang-selector { display: none !important; }
            
            .notebook-section { 
                position: static !important;
                width: 100% !important; 
                height: auto !important; 
                overflow: visible !important;
                border: none !important;
                background: white !important;
                transform: none !important;
                display: block !important;
                box-shadow: none !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            .notebook-title button, 
            .notebook-title .print-btn-wrapper { display: none !important; }

            .notebook-scroll-container {
                overflow: visible !important;
                height: auto !important;
                display: block !important;
                background: none !important;
                flex: none !important;
            }

            .notebook-grid {
                display: grid !important;
                grid-template-columns: repeat(5, 1fr) !important;
                gap: 10px !important; /* Gap diperkecil */
                overflow: visible !important;
                padding-bottom: 0 !important;
                height: auto !important;
            }
            
            .notebook-item {
                border: 1px solid #ccc !important;
                break-inside: avoid;
                page-break-inside: avoid;
                background: white !important;
                /* Pengaturan tinggi agar pas 3 baris per halaman */
                height: 5.2cm !important; 
                aspect-ratio: auto !important; /* Override aspect ratio agar tidak terlalu tinggi */
                width: 100% !important;
                position: relative !important;
            }

            /* Logika Pemotong Halaman: Paksa pindah halaman setelah item ke-15 */
            .notebook-item:nth-child(15) {
                break-after: page !important;
                page-break-after: always !important;
            }
            
            .print-header { 
                display: block !important; 
                text-align: center; 
                margin-bottom: 10px; 
                color: black !important; 
                border-bottom: 1px solid #eee; 
                padding-bottom: 5px; 
            }
            .print-header h1 { margin: 0; font-size: 20px; font-weight: bold; }
            .print-header p { margin: 2px 0 0; font-size: 12px; color: #666; }
            
            .overflow-y-auto { overflow: visible !important; background: none !important; }
            .bg-slate-50\/30 { background: none !important; }
        }
        .print-header { display: none; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        /* =========================================
           0. ICONS
           ========================================= */
        const IconBase = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );
        const Globe = (props) => (<IconBase {...props}><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></IconBase>);
        const Menu = (props) => (<IconBase {...props}><line x1="4" y1="12" x2="20" y2="12"/><line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="18" x2="20" y2="18"/></IconBase>);
        const X = (props) => (<IconBase {...props}><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></IconBase>);
        const Book = (props) => (<IconBase {...props}><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></IconBase>);
        const CheckCircle = (props) => (<IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>);
        const ChevronDown = (props) => (<IconBase {...props}><polyline points="6 9 12 15 18 9"/></IconBase>);
        const ChevronRight = (props) => (<IconBase {...props}><polyline points="9 18 15 12 9 6"/></IconBase>);
        const RotateCcw = (props) => (<IconBase {...props}><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></IconBase>);
        const Eraser = (props) => (<IconBase {...props}><path d="m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"/><path d="M22 21H7"/><path d="m5 11 9 9"/></IconBase>);
        const Printer = (props) => (<IconBase {...props}><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></IconBase>);
        const Volume2 = (props) => (<IconBase {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/></IconBase>);

        /* =========================================
           1. LOCALIZATION
           ========================================= */
        const UI_STRINGS = {
            id: {
                appTitle: "GlobalScript",
                appSubtitle: "METODE IQRO DIGITAL",
                creatorName: "by Angga Conni Saputra",
                menuTitle: "Pengaturan Belajar",
                subjectLabel: "Mata Pelajaran",
                stageLabel: "Pilih Tingkat (Jilid)",
                canvasInstruction: "Tebalkan huruf bercahaya",
                clear: "Hapus",
                repeat: "Ulang",
                next: "Lanjut",
                finish: "Selesai!",
                notebookTitle: "Buku Latihan",
                notebookPage: "hal",
                printBtn: "Cetak PDF",
                reportTitle: "Laporan Belajar",
                tips: "Tips:",
                loading: "Memuat...",
                selectLang: "Bahasa",
                levelPrefix: "Jilid"
            },
            en: {
                appTitle: "GlobalScript",
                appSubtitle: "DIGITAL IQRO METHOD",
                creatorName: "by Angga Conni Saputra",
                menuTitle: "Learning Settings",
                subjectLabel: "Subject",
                stageLabel: "Select Level (Stage)",
                canvasInstruction: "Trace the glowing letter",
                clear: "Clear",
                repeat: "Retry",
                next: "Next",
                finish: "Done!",
                notebookTitle: "Workbook",
                notebookPage: "pg",
                printBtn: "Print PDF",
                reportTitle: "Learning Report",
                tips: "Hint:",
                loading: "Loading...",
                selectLang: "Language",
                levelPrefix: "Level"
            }
        };

        /* =========================================
           2. DATA HURUF (LIBRARY)
           ========================================= */
        const createStages = (chars) => {
            return chars.map((char, index) => ({
                id: index + 1,
                title: `${char.symbol} - ${char.read}`,
                newChars: [char]
            }));
        };

        // --- DATA ---
        
        const CHARS_ALPHABET = [
            { id: 'A', symbol: "A", read: "A", hint: { id: "Gunung dengan sabuk.", en: "Mountain with a belt." } },
            { id: 'B', symbol: "B", read: "B", hint: { id: "Tiang lurus dua perut.", en: "Straight pole, two bellies." } },
            { id: 'C', symbol: "C", read: "C", hint: { id: "Bulan sabit.", en: "Crescent moon." } },
            { id: 'D', symbol: "D", read: "D", hint: { id: "Perut besar.", en: "Big belly." } },
            { id: 'E', symbol: "E", read: "E", hint: { id: "Sisir tiga gigi.", en: "Comb with three teeth." } },
            { id: 'F', symbol: "F", read: "F", hint: { id: "Bendera.", en: "A flag." } },
            { id: 'G', symbol: "G", read: "G", hint: { id: "Huruf C ada kursinya.", en: "Letter C with a seat." } },
            { id: 'H', symbol: "H", read: "H", hint: { id: "Tangga.", en: "Ladder." } },
            { id: 'I', symbol: "I", read: "I", hint: { id: "Tiang listrik.", en: "Utility pole / I." } },
            { id: 'J', symbol: "J", read: "J", hint: { id: "Kail pancing.", en: "Fish hook." } },
            { id: 'K', symbol: "K", read: "K", hint: { id: "Tangan ke atas, kaki ke bawah.", en: "Hand up, leg down." } },
            { id: 'L', symbol: "L", read: "L", hint: { id: "Siku-siku.", en: "Right angle." } },
            { id: 'M', symbol: "M", read: "M", hint: { id: "Dua gunung.", en: "Two mountains." } },
            { id: 'N', symbol: "N", read: "N", hint: { id: "Petir/Zigzag.", en: "Lightning/Zigzag." } },
            { id: 'O', symbol: "O", read: "O", hint: { id: "Donat.", en: "Doughnut." } },
            { id: 'P', symbol: "P", read: "P", hint: { id: "Kepala di atas.", en: "Head on top." } },
            { id: 'Q', symbol: "Q", read: "Q", hint: { id: "O punya ekor.", en: "O with a tail." } },
            { id: 'R', symbol: "R", read: "R", hint: { id: "P punya kaki.", en: "P with a leg." } },
            { id: 'S', symbol: "S", read: "S", hint: { id: "Ular meliuk.", en: "Slithering snake." } },
            { id: 'T', symbol: "T", read: "T", hint: { id: "Palu.", en: "Hammer." } },
            { id: 'U', symbol: "U", read: "U", hint: { id: "Gelas.", en: "Glass/Cup." } },
            { id: 'V', symbol: "V", read: "V", hint: { id: "Burung terbang.", en: "Flying bird." } },
            { id: 'W', symbol: "W", read: "W", hint: { id: "M terbalik.", en: "Upside down M." } },
            { id: 'X', symbol: "X", read: "X", hint: { id: "Silang.", en: "Cross." } },
            { id: 'Y', symbol: "Y", read: "Y", hint: { id: "Ketapel.", en: "Slingshot." } },
            { id: 'Z', symbol: "Z", read: "Z", hint: { id: "Zigzag tajam.", en: "Sharp zigzag." } }
        ];

        const CHARS_ARABIC = [
            { id: 'alif', symbol: "Ø§", read: "Alif", hint: { id: "Tongkat lurus.", en: "Straight stick." } },
            { id: 'ba', symbol: "Ø¨", read: "Ba", hint: { id: "Perahu titik satu di bawah.", en: "Boat, one dot below." } },
            { id: 'ta', symbol: "Øª", read: "Ta", hint: { id: "Perahu titik dua di atas.", en: "Boat, two dots above." } },
            { id: 'tsa', symbol: "Ø«", read: "Tsa", hint: { id: "Perahu titik tiga.", en: "Boat, three dots." } },
            { id: 'jim', symbol: "Ø¬", read: "Jim", hint: { id: "Perut buncit titik di dalam.", en: "Belly with dot inside." } },
            { id: 'ha', symbol: "Ø­", read: "Ha", hint: { id: "Perut buncit kosong.", en: "Empty belly." } },
            { id: 'kha', symbol: "Ø®", read: "Kha", hint: { id: "Perut buncit titik di atas.", en: "Belly, dot on top." } },
            { id: 'dal', symbol: "Ø¯", read: "Dal", hint: { id: "Mulut terbuka.", en: "Open mouth." } },
            { id: 'dzal', symbol: "Ø°", read: "Dzal", hint: { id: "Dal ada titiknya.", en: "Dal with a dot." } },
            { id: 'ra', symbol: "Ø±", read: "Ra", hint: { id: "Perosotan.", en: "Slide." } },
            { id: 'zai', symbol: "Ø²", read: "Zai", hint: { id: "Perosotan titik satu.", en: "Slide with a dot." } },
            { id: 'sin', symbol: "Ø³", read: "Sin", hint: { id: "Gigi tiga perut besar.", en: "Three teeth, big belly." } },
            { id: 'syin', symbol: "Ø´", read: "Syin", hint: { id: "Sin titik tiga.", en: "Sin with three dots." } },
            { id: 'shad', symbol: "Øµ", read: "Shad", hint: { id: "Kepala lonjong.", en: "Oval head." } },
            { id: 'dhad', symbol: "Ø¶", read: "Dhad", hint: { id: "Shad titik satu.", en: "Shad with a dot." } },
            { id: 'tha', symbol: "Ø·", read: "Tha", hint: { id: "Kepala lonjong bertiang.", en: "Oval head with pole." } },
            { id: 'zha', symbol: "Ø¸", read: "Zha", hint: { id: "Tha titik satu.", en: "Tha with a dot." } },
            { id: 'ain', symbol: "Ø¹", read: "'Ain", hint: { id: "C kecil dan C besar.", en: "Small C and Big C." } },
            { id: 'ghain', symbol: "Øº", read: "Ghain", hint: { id: "Ain titik satu.", en: "Ain with a dot." } },
            { id: 'fa', symbol: "Ù", read: "Fa", hint: { id: "Kepala bulat leher pendek.", en: "Round head, short neck." } },
            { id: 'qof', symbol: "Ù‚", read: "Qof", hint: { id: "Kepala bulat perut dalam.", en: "Round head, deep belly." } },
            { id: 'kaf', symbol: "Ùƒ", read: "Kaf", hint: { id: "S kecil di atas kursi.", en: "Small S on a chair." } },
            { id: 'lam', symbol: "Ù„", read: "Lam", hint: { id: "Kail pancing.", en: "Fish hook." } },
            { id: 'mim', symbol: "Ù…", read: "Mim", hint: { id: "Kepala bulat ekor bawah.", en: "Round head, tail down." } },
            { id: 'nun', symbol: "Ù†", read: "Nun", hint: { id: "Mangkuk titik satu.", en: "Bowl with one dot." } },
            { id: 'waw', symbol: "Ùˆ", read: "Waw", hint: { id: "Kepala bulat meluncur.", en: "Gliding round head." } },
            { id: 'ha_besar', symbol: "Ù‡", read: "Ha", hint: { id: "Bulatan simpul.", en: "Knot circle." } },
            { id: 'ya', symbol: "ÙŠ", read: "Ya", hint: { id: "Angsa titik dua.", en: "Goose with two dots." } }
        ];

        const CHARS_HANGUL = [
            { id: 'g', symbol: "ã„±", read: "Giyok (G)", hint: { id: "Pistol.", en: "Gun shape." } }, 
            { id: 'n', symbol: "ã„´", read: "Nieun (N)", hint: { id: "Duduk.", en: "Sitting." } }, 
            { id: 'd', symbol: "ã„·", read: "Digeut (D)", hint: { id: "Kotak terbuka.", en: "Open box." } }, 
            { id: 'r', symbol: "ã„¹", read: "Rieul (R/L)", hint: { id: "Ular.", en: "Snake." } }, 
            { id: 'm', symbol: "ã…", read: "Mieum (M)", hint: { id: "Kotak.", en: "Box / Square." } }, 
            { id: 'b', symbol: "ã…‚", read: "Bieup (B)", hint: { id: "Ember.", en: "Bucket." } }, 
            { id: 's', symbol: "ã……", read: "Siot (S)", hint: { id: "Orang berdiri.", en: "Standing person." } }, 
            { id: 'ng', symbol: "ã…‡", read: "Ieung (Ng)", hint: { id: "Bulatan.", en: "Circle." } }, 
            { id: 'j', symbol: "ã…ˆ", read: "Jieut (J)", hint: { id: "Siot pakai topi.", en: "Siot with hat." } }, 
            { id: 'ch', symbol: "ã…Š", read: "Chieut (Ch)", hint: { id: "Jieut pakai topi.", en: "Jieut with hat." } }, 
            { id: 'k', symbol: "ã…‹", read: "Kieuk (K)", hint: { id: "Pistol ada pelatuk.", en: "Gun with trigger." } }, 
            { id: 't', symbol: "ã…Œ", read: "Tieut (T)", hint: { id: "Sisir E.", en: "Comb / E." } }, 
            { id: 'p', symbol: "ã…", read: "Pieup (P)", hint: { id: "Pilar Romawi.", en: "Roman pillar." } }, 
            { id: 'h', symbol: "ã…Ž", read: "Hieut (H)", hint: { id: "Orang pakai topi.", en: "Person with hat." } }, 
            { id: 'a', symbol: "ã…", read: "A", hint: { id: "Tongkat tangan kanan.", en: "Stick, right hand." } }, 
            { id: 'ya', symbol: "ã…‘", read: "Ya", hint: { id: "Tongkat dua tangan kanan.", en: "Stick, two right hands." } }, 
            { id: 'eo', symbol: "ã…“", read: "Eo", hint: { id: "Tongkat tangan kiri.", en: "Stick, left hand." } }, 
            { id: 'yeo', symbol: "ã…•", read: "Yeo", hint: { id: "Tongkat dua tangan kiri.", en: "Stick, two left hands." } }, 
            { id: 'o', symbol: "ã…—", read: "O", hint: { id: "Tangan ke atas.", en: "Hand up." } }, 
            { id: 'yo', symbol: "ã…›", read: "Yo", hint: { id: "Dua tangan ke atas.", en: "Two hands up." } }, 
            { id: 'u', symbol: "ã…œ", read: "U", hint: { id: "Tangan ke bawah.", en: "Hand down." } }, 
            { id: 'yu', symbol: "ã… ", read: "Yu", hint: { id: "Dua tangan ke bawah.", en: "Two hands down." } }, 
            { id: 'eu', symbol: "ã…¡", read: "Eu", hint: { id: "Garis datar.", en: "Flat line." } }, 
            { id: 'i', symbol: "ã…£", read: "I", hint: { id: "Garis tegak.", en: "Vertical line." } }
        ];

        // Untuk yang lain, jika belum ditranslate, sistem akan fallback ke string yang ada (Indo)
        const CHARS_HIRAGANA = [
            { symbol: "ã‚", read: "A", hint: "Ikan." }, { symbol: "ã„", read: "I", hint: "Dua garis." }, { symbol: "ã†", read: "U", hint: "Bungkuk." }, { symbol: "ãˆ", read: "E", hint: "Burung." }, { symbol: "ãŠ", read: "O", hint: "A + titik." }, { symbol: "ã‹", read: "Ka", hint: "Kekuatan." }, { symbol: "ã", read: "Ki", hint: "Kunci." }, { symbol: "ã", read: "Ku", hint: "Mulut." }, { symbol: "ã‘", read: "Ke", hint: "Pedang." }, { symbol: "ã“", read: "Ko", hint: "Cacing." }, { symbol: "ã•", read: "Sa", hint: "Senyum." }, { symbol: "ã—", read: "Shi", hint: "Kail." }, { symbol: "ã™", read: "Su", hint: "Simpul." }, { symbol: "ã›", read: "Se", hint: "Pangkuan." }, { symbol: "ã", read: "So", hint: "Zigzag." }, { symbol: "ãŸ", read: "Ta", hint: "Ta + Ko." }, { symbol: "ã¡", read: "Chi", hint: "Lima." }, { symbol: "ã¤", read: "Tsu", hint: "Ombak." }, { symbol: "ã¦", read: "Te", hint: "Tangan." }, { symbol: "ã¨", read: "To", hint: "Duri." }, { symbol: "ãª", read: "Na", hint: "Salib." }, { symbol: "ã«", read: "Ni", hint: "Garis + Ko." }, { symbol: "ã¬", read: "Nu", hint: "Mie." }, { symbol: "ã­", read: "Ne", hint: "Kucing." }, { symbol: "ã®", read: "No", hint: "Larangan." }, { symbol: "ã¯", read: "Ha", hint: "Ha + Simpul." }, { symbol: "ã²", read: "Hi", hint: "Senyum V." }, { symbol: "ãµ", read: "Fu", hint: "Gunung Fuji." }, { symbol: "ã¸", read: "He", hint: "Gunung." }, { symbol: "ã»", read: "Ho", hint: "Ha + Topi." }, { symbol: "ã¾", read: "Ma", hint: "Dua garis simpul." }, { symbol: "ã¿", read: "Mi", hint: "21." }, { symbol: "ã‚€", read: "Mu", hint: "Sapi (Moo)." }, { symbol: "ã‚", read: "Me", hint: "Mie (Nu) tanpa ekor." }, { symbol: "ã‚‚", read: "Mo", hint: "Kail dua umpan." }, { symbol: "ã‚„", read: "Ya", hint: "Yakitori." }, { symbol: "ã‚†", read: "Yu", hint: "Ikan melintas." }, { symbol: "ã‚ˆ", read: "Yo", hint: "Yo-yo." }, { symbol: "ã‚‰", read: "Ra", hint: "Angka 5." }, { symbol: "ã‚Š", read: "Ri", hint: "Dua garis." }, { symbol: "ã‚‹", read: "Ru", hint: "Tiga simpul." }, { symbol: "ã‚Œ", read: "Re", hint: "Z melengkung." }, { symbol: "ã‚", read: "Ro", hint: "Tiga (Ru) tanpa simpul." }, { symbol: "ã‚", read: "Wa", hint: "Re gemuk." }, { symbol: "ã‚’", read: "Wo", hint: "Huruf C dan h." }, { symbol: "ã‚“", read: "N", hint: "Huruf h miring." }
        ].map((c, i) => ({ ...c, id: `hira_${i}` }));

        const CHARS_KATAKANA = [
            { symbol: "ã‚¢", read: "A", hint: "T miring." }, { symbol: "ã‚¤", read: "I", hint: "Orang." }, { symbol: "ã‚¦", read: "U", hint: "Atap." }, { symbol: "ã‚¨", read: "E", hint: "I Romawi." }, { symbol: "ã‚ª", read: "O", hint: "Orang menari." }, { symbol: "ã‚«", read: "Ka", hint: "Ka tanpa titik." }, { symbol: "ã‚­", read: "Ki", hint: "Dua garis." }, { symbol: "ã‚¯", read: "Ku", hint: "Tujuh." }, { symbol: "ã‚±", read: "Ke", hint: "K melengkung." }, { symbol: "ã‚³", read: "Ko", hint: "Siku." }, { symbol: "ã‚µ", read: "Sa", hint: "Tiang." }, { symbol: "ã‚·", read: "Shi", hint: "Air ciprat." }, { symbol: "ã‚¹", read: "Su", hint: "Gantungan." }, { symbol: "ã‚»", read: "Se", hint: "Siku miring." }, { symbol: "ã‚½", read: "So", hint: "Jarum." }, { symbol: "ã‚¿", read: "Ta", hint: "Sore (Yu)." }, { symbol: "ãƒ", read: "Chi", hint: "Seribu." }, { symbol: "ãƒ„", read: "Tsu", hint: "Senyum." }, { symbol: "ãƒ†", read: "Te", hint: "Dua garis." }, { symbol: "ãƒˆ", read: "To", hint: "Totem." }, { symbol: "ãƒŠ", read: "Na", hint: "Pedang." }, { symbol: "ãƒ‹", read: "Ni", hint: "Dua." }, { symbol: "ãƒŒ", read: "Nu", hint: "Tujuh." }, { symbol: "ãƒ", read: "Ne", hint: "Pohon." }, { symbol: "ãƒŽ", read: "No", hint: "Coretan." }, { symbol: "ãƒ", read: "Ha", hint: "Kumis." }, { symbol: "ãƒ’", read: "Hi", hint: "Kursi." }, { symbol: "ãƒ•", read: "Fu", hint: "Tujuh bengkok." }, { symbol: "ãƒ˜", read: "He", hint: "Gunung." }, { symbol: "ãƒ›", read: "Ho", hint: "Pohon salib." }, { symbol: "ãƒž", read: "Ma", hint: "Siku 7." }, { symbol: "ãƒŸ", read: "Mi", hint: "Tiga garis." }, { symbol: "ãƒ ", read: "Mu", hint: "Segitiga." }, { symbol: "ãƒ¡", read: "Me", hint: "Silang." }, { symbol: "ãƒ¢", read: "Mo", hint: "Dua garis E." }, { symbol: "ãƒ¤", read: "Ya", hint: "Tujuh miring." }, { symbol: "ãƒ¦", read: "Yu", hint: "Nomor 1." }, { symbol: "ãƒ¨", read: "Yo", hint: "E terbalik." }, { symbol: "ãƒ©", read: "Ra", hint: "Topi." }, { symbol: "ãƒª", read: "Ri", hint: "Dua garis." }, { symbol: "ãƒ«", read: "Ru", hint: "Kaki." }, { symbol: "ãƒ¬", read: "Re", hint: "L." }, { symbol: "ãƒ­", read: "Ro", hint: "Kotak." }, { symbol: "ãƒ¯", read: "Wa", hint: "Tanya." }, { symbol: "ãƒ²", read: "Wo", hint: "F." }, { symbol: "ãƒ³", read: "N", hint: "Senyum satu mata." }
        ].map((c, i) => ({ ...c, id: `kata_${i}` }));

        const CHARS_JAVANESE = [
            { symbol: "ê¦²", read: "Ha", hint: "Ha" }, { symbol: "ê¦¤", read: "Na", hint: "Na" }, { symbol: "ê¦•", read: "Ca", hint: "Ca" }, { symbol: "ê¦«", read: "Ra", hint: "Ra" }, { symbol: "ê¦", read: "Ka", hint: "Ka" }, { symbol: "ê¦¢", read: "Da", hint: "Da" }, { symbol: "ê¦ ", read: "Ta", hint: "Ta" }, { symbol: "ê¦±", read: "Sa", hint: "Sa" }, { symbol: "ê¦®", read: "Wa", hint: "Wa" }, { symbol: "ê¦­", read: "La", hint: "La" }, { symbol: "ê¦¥", read: "Pa", hint: "Pa" }, { symbol: "ê¦", read: "Dha", hint: "Dha" }, { symbol: "ê¦—", read: "Ja", hint: "Ja" }, { symbol: "ê¦ª", read: "Ya", hint: "Ya" }, { symbol: "ê¦š", read: "Nya", hint: "Nya" }, { symbol: "ê¦©", read: "Ma", hint: "Ma" }, { symbol: "ê¦’", read: "Ga", hint: "Ga" }, { symbol: "ê¦§", read: "Ba", hint: "Ba" }, { symbol: "ê¦›", read: "Tha", hint: "Tha" }, { symbol: "ê¦”", read: "Nga", hint: "Nga" }
        ].map((c, i) => ({ ...c, id: `java_${i}` }));

        const CHARS_THAI = [
            { symbol: "à¸", read: "Ko Kai", hint: "Ayam." }, { symbol: "à¸‚", read: "Kho Khai", hint: "Telur." }, { symbol: "à¸ƒ", read: "Kho Khuad", hint: "Botol." }, { symbol: "à¸„", read: "Kho Khwai", hint: "Kerbau." }, { symbol: "à¸…", read: "Kho Khon", hint: "Orang." }, { symbol: "à¸†", read: "Kho Rakhang", hint: "Lonceng." }, { symbol: "à¸‡", read: "Ngo Ngu", hint: "Ular." }, { symbol: "à¸ˆ", read: "Cho Chan", hint: "Piring." }, { symbol: "à¸‰", read: "Cho Ching", hint: "Simbal." }, { symbol: "à¸Š", read: "Cho Chang", hint: "Gajah." }, { symbol: "à¸‹", read: "So So", hint: "Rantai." }, { symbol: "à¸Œ", read: "Cho Choe", hint: "Pohon." }, { symbol: "à¸", read: "Yo Ying", hint: "Wanita." }, { symbol: "à¸Ž", read: "Do Chada", hint: "Mahkota." }, { symbol: "à¸", read: "To Patak", hint: "Tombak." }, { symbol: "à¸", read: "Tho Than", hint: "Peralatan." }, { symbol: "à¸‘", read: "Tho Montho", hint: "Raksasa." }, { symbol: "à¸’", read: "Tho Phuthao", hint: "Orang Tua." }, { symbol: "à¸“", read: "No Nen", hint: "Biksuni." }, { symbol: "à¸”", read: "Do Dek", hint: "Anak." }, { symbol: "à¸•", read: "To Tao", hint: "Kura-kura." }, { symbol: "à¸–", read: "Tho Thung", hint: "Tas." }, { symbol: "à¸—", read: "Tho Thahan", hint: "Tentara." }, { symbol: "à¸˜", read: "Tho Thong", hint: "Bendera." }, { symbol: "à¸™", read: "No Nu", hint: "Tikus." }, { symbol: "à¸š", read: "Bo Baimai", hint: "Daun." }, { symbol: "à¸›", read: "Po Pla", hint: "Ikan." }, { symbol: "à¸œ", read: "Pho Phueng", hint: "Lebah." }, { symbol: "à¸", read: "Fo Fa", hint: "Tutup." }, { symbol: "à¸ž", read: "Pho Phan", hint: "Nampan." }, { symbol: "à¸Ÿ", read: "Fo Fan", hint: "Gigi." }, { symbol: "à¸ ", read: "Pho Samphao", hint: "Perahu Layar." }, { symbol: "à¸¡", read: "Mo Ma", hint: "Kuda." }, { symbol: "à¸¢", read: "Yo Yak", hint: "Raksasa." }, { symbol: "à¸£", read: "Ro Ruea", hint: "Perahu." }, { symbol: "à¸¥", read: "Lo Ling", hint: "Monyet." }, { symbol: "à¸§", read: "Wo Waen", hint: "Cincin." }, { symbol: "à¸¨", read: "So Sala", hint: "Paviliun." }, { symbol: "à¸©", read: "So Ruesi", hint: "Pertapa." }, { symbol: "à¸ª", read: "So Suea", hint: "Harimau." }, { symbol: "à¸«", read: "Ho Hip", hint: "Kotak." }, { symbol: "à¸¬", read: "Lo Chula", hint: "Layang-layang." }, { symbol: "à¸­", read: "O Ang", hint: "Baskom." }, { symbol: "à¸®", read: "Ho Nokhuk", hint: "Burung Hantu." }
        ].map((c, i) => ({ ...c, id: `thai_${i}` }));

        // 1. AKSARA BUGIS (LONTARA)
        const CHARS_BUGIS = [
            { symbol: "á¨€", read: "Ka", hint: "Seperti huruf k terbalik." },
            { symbol: "á¨", read: "Ga", hint: "Seperti jembatan lengkung." },
            { symbol: "á¨‚", read: "Nga", hint: "Seperti huruf v kecil." },
            { symbol: "á¨ƒ", read: "Ngka", hint: "Kombinasi Nga dan Ka." },
            { symbol: "á¨„", read: "Pa", hint: "Seperti huruf v terbalik." },
            { symbol: "á¨…", read: "Ba", hint: "Lengkungan ganda ke atas." },
            { symbol: "á¨†", read: "Ma", hint: "Seperti cangkir." },
            { symbol: "á¨‡", read: "Mpa", hint: "Kombinasi Ma dan Pa." },
            { symbol: "á¨ˆ", read: "Ta", hint: "Garis bergelombang naik." },
            { symbol: "á¨‰", read: "Da", hint: "Garis bergelombang turun." },
            { symbol: "á¨Š", read: "Na", hint: "Bentuk zig-zag horisontal." },
            { symbol: "á¨‹", read: "Nra", hint: "Kombinasi Na dan Ra." },
            { symbol: "á¨Œ", read: "Ca", hint: "Lengkungan menghadap kiri." },
            { symbol: "á¨", read: "Ja", hint: "Lengkungan menghadap kanan." },
            { symbol: "á¨Ž", read: "Nya", hint: "Bentuk titik tiga." },
            { symbol: "á¨", read: "Nca", hint: "Kombinasi Nya dan Ca." },
            { symbol: "á¨", read: "Ya", hint: "Tiga titik vertikal." },
            { symbol: "á¨‘", read: "Ra", hint: "Lengkungan sederhana." },
            { symbol: "á¨’", read: "La", hint: "Seperti ombak." },
            { symbol: "á¨“", read: "Wa", hint: "Ombak ganda." },
            { symbol: "á¨”", read: "Sa", hint: "Seperti huruf s miring." },
            { symbol: "á¨•", read: "A", hint: "Bentuk dasar lontara." },
            { symbol: "á¨–", read: "Ha", hint: "Bentuk simpul." }
        ].map((c, i) => ({ ...c, id: `bugis_${i}` }));

        // 2. AKSARA BATAK
        const CHARS_BATAK = [
            { symbol: "á¯€", read: "A", hint: "Garis lengkung mendatar." },
            { symbol: "á¯‚", read: "Ha", hint: "Garis tegak berbelok." },
            { symbol: "á¯”", read: "Ma", hint: "Silang dengan ekor." },
            { symbol: "á¯‰", read: "Na", hint: "Garis mendatar dengan kaki." },
            { symbol: "á¯’", read: "Ra", hint: "Lengkungan tajam." },
            { symbol: "á¯–", read: "Ta", hint: "Dua garis silang." },
            { symbol: "á¯˜", read: "Sa", hint: "Bentuk segitiga terbuka." },
            { symbol: "á¯‡", read: "Pa", hint: "Garis dengan dua kaki." },
            { symbol: "á¯ž", read: "La", hint: "Kail pancing." },
            { symbol: "á¯Ž", read: "Ga", hint: "Garis mendatar sederhana." },
            { symbol: "á¯", read: "Ja", hint: "Bentuk seperti wajik." },
            { symbol: "á¯‘", read: "Da", hint: "Kotak terbuka." },
            { symbol: "á¯", read: "Nga", hint: "Garis lengkung berekor." },
            { symbol: "á¯…", read: "Ba", hint: "Seperti huruf E." },
            { symbol: "á¯‹", read: "Wa", hint: "Lengkungan ganda." },
            { symbol: "á¯›", read: "Ya", hint: "Garis vertikal berekor." },
            { symbol: "ÐŠ", read: "Nya", hint: "Bentuk kompleks." },
            { symbol: "á¯¤", read: "I", hint: "Garis tegak lurus." },
            { symbol: "á¯¥", read: "U", hint: "Garis miring." }
        ].map((c, i) => ({ ...c, id: `batak_${i}` }));

        // 3. AKSARA BALI
        const CHARS_BALI = [
            { symbol: "á¬³", read: "Ha", hint: "Bentuk dasar bergelombang." },
            { symbol: "á¬¦", read: "Na", hint: "Lengkungan ganda ke bawah." },
            { symbol: "á¬˜", read: "Ca", hint: "Seperti angka 3 terbalik." },
            { symbol: "á¬­", read: "Ra", hint: "Lengkungan tajam." },
            { symbol: "á¬“", read: "Ka", hint: "Lengkungan dengan kaki." },
            { symbol: "á¬¤", read: "Da", hint: "Bentuk membulat." },
            { symbol: "á¬¢", read: "Ta", hint: "Lengkungan vertikal." },
            { symbol: "á¬²", read: "Sa", hint: "Bentuk kompleks simetris." },
            { symbol: "á¬¯", read: "Wa", hint: "Lingkaran tak penuh." },
            { symbol: "á¬®", read: "La", hint: "Lengkungan tinggi." },
            { symbol: "á¬—", read: "Ma", hint: "Bentuk dasar kotak." },
            { symbol: "á¬•", read: "Ga", hint: "Seperti huruf M." },
            { symbol: "á¬©", read: "Ba", hint: "Lengkungan ganda." },
            { symbol: "á¬—", read: "Nga", hint: "Bentuk seperti naga." },
            { symbol: "á¬§", read: "Pa", hint: "Lengkungan sederhana." },
            { symbol: "á¬š", read: "Ja", hint: "Bentuk kompleks berekor." },
            { symbol: "á¬¬", read: "Ya", hint: "Tiga lengkungan." },
            { symbol: "á¬œ", read: "Nya", hint: "Bentuk rumit." }
        ].map((c, i) => ({ ...c, id: `bali_${i}` }));

        // 4. AKSARA SUNDA (Jawa Barat - 32 Aksara Dasar)
        // 7 Swara (Vokal) + 18 Ngalagena (Konsonan) + 7 Konsonan Serapan
        const CHARS_SUNDA = [
            // Swara
            { symbol: "á®ƒ", read: "A", hint: "Swara A" },
            { symbol: "á®„", read: "I", hint: "Swara I" },
            { symbol: "á®…", read: "U", hint: "Swara U" },
            { symbol: "á®†", read: "Ã‰", hint: "Swara Ã‰ (Taling)" },
            { symbol: "á®‡", read: "O", hint: "Swara O" },
            { symbol: "á®ˆ", read: "E", hint: "Swara E (Pepet)" },
            { symbol: "á®‰", read: "EU", hint: "Swara EU" },
            // Ngalagena
            { symbol: "á®Š", read: "Ka", hint: "Konsonan Ka" },
            { symbol: "á®Œ", read: "Ga", hint: "Konsonan Ga" },
            { symbol: "á®", read: "Nga", hint: "Konsonan Nga" },
            { symbol: "á®Ž", read: "Ca", hint: "Konsonan Ca" },
            { symbol: "á®", read: "Ja", hint: "Konsonan Ja" },
            { symbol: "á®‘", read: "Nya", hint: "Konsonan Nya" },
            { symbol: "á®’", read: "Ta", hint: "Konsonan Ta" },
            { symbol: "á®”", read: "Da", hint: "Konsonan Da" },
            { symbol: "á®•", read: "Na", hint: "Konsonan Na" },
            { symbol: "á®–", read: "Pa", hint: "Konsonan Pa" },
            { symbol: "á®—", read: "Ba", hint: "Konsonan Ba" },
            { symbol: "á®˜", read: "Ma", hint: "Konsonan Ma" },
            { symbol: "á®™", read: "Ya", hint: "Konsonan Ya" },
            { symbol: "á®š", read: "Ra", hint: "Konsonan Ra" },
            { symbol: "á®›", read: "La", hint: "Konsonan La" },
            { symbol: "á®œ", read: "Wa", hint: "Konsonan Wa" },
            { symbol: "á®", read: "Sa", hint: "Konsonan Sa" },
            { symbol: "á®ž", read: "Ha", hint: "Konsonan Ha" },
            // Serapan
            { symbol: "á®Ÿ", read: "Fa", hint: "Konsonan Serapan Fa" },
            { symbol: "á® ", read: "Qa", hint: "Konsonan Serapan Qa" },
            { symbol: "á®¡", read: "Va", hint: "Konsonan Serapan Va" },
            { symbol: "á®¢", read: "Xa", hint: "Konsonan Serapan Xa" },
            { symbol: "á®£", read: "Za", hint: "Konsonan Serapan Za" },
            { symbol: "á®¤", read: "Kha", hint: "Konsonan Serapan Kha" },
            { symbol: "á®¥", read: "Sya", hint: "Konsonan Serapan Sya" }
        ].map((c, i) => ({ ...c, id: `sunda_${i}` }));

        // 5. AKSARA REJANG (KaGaNga - Bengkulu/Sumatera)
        // 23 Huruf Utama + 13 Tanda Baca + 1 Tanda Khusus
        const CHARS_REJANG = [
            // Konsonan Utama (23)
            { symbol: "ê¤°", read: "Ka", hint: { id: "Huruf Ka", en: "Letter Ka" } },
            { symbol: "ê¤±", read: "Ga", hint: { id: "Huruf Ga", en: "Letter Ga" } },
            { symbol: "ê¤²", read: "Nga", hint: { id: "Huruf Nga", en: "Letter Nga" } },
            { symbol: "ê¤³", read: "Ta", hint: { id: "Huruf Ta", en: "Letter Ta" } },
            { symbol: "ê¤´", read: "Da", hint: { id: "Huruf Da", en: "Letter Da" } },
            { symbol: "ê¤µ", read: "Na", hint: { id: "Huruf Na", en: "Letter Na" } },
            { symbol: "ê¤¶", read: "Pa", hint: { id: "Huruf Pa", en: "Letter Pa" } },
            { symbol: "ê¤·", read: "Ba", hint: { id: "Huruf Ba", en: "Letter Ba" } },
            { symbol: "ê¤¸", read: "Ma", hint: { id: "Huruf Ma", en: "Letter Ma" } },
            { symbol: "ê¤¹", read: "Ca", hint: { id: "Huruf Ca", en: "Letter Ca" } },
            { symbol: "ê¤º", read: "Ja", hint: { id: "Huruf Ja", en: "Letter Ja" } },
            { symbol: "ê¤»", read: "Nya", hint: { id: "Huruf Nya", en: "Letter Nya" } },
            { symbol: "ê¤¼", read: "Sa", hint: { id: "Huruf Sa", en: "Letter Sa" } },
            { symbol: "ê¤½", read: "Ra", hint: { id: "Huruf Ra", en: "Letter Ra" } },
            { symbol: "ê¤¾", read: "La", hint: { id: "Huruf La", en: "Letter La" } },
            { symbol: "ê¤¿", read: "Wa", hint: { id: "Huruf Wa", en: "Letter Wa" } },
            { symbol: "ê¥€", read: "Ya", hint: { id: "Huruf Ya", en: "Letter Ya" } },
            { symbol: "ê¥", read: "Ha", hint: { id: "Huruf Ha", en: "Letter Ha" } },
            { symbol: "ê¥‚", read: "Mba", hint: { id: "Huruf Mba", en: "Letter Mba" } },
            { symbol: "ê¥ƒ", read: "Ngg", hint: { id: "Huruf Ngg", en: "Letter Ngg" } },
            { symbol: "ê¥„", read: "Nda", hint: { id: "Huruf Nda", en: "Letter Nda" } },
            { symbol: "ê¥…", read: "Nyja", hint: { id: "Huruf Nyja", en: "Letter Nyja" } },
            { symbol: "ê¥†", read: "A", hint: { id: "Huruf A", en: "Letter A" } },
            // Tanda Baca/Diakritik (13)
            { symbol: "ê¥‡", read: "i", hint: { id: "Tanda Vokal i", en: "Vowel Sign i" } },
            { symbol: "ê¥ˆ", read: "u", hint: { id: "Tanda Vokal u", en: "Vowel Sign u" } },
            { symbol: "ê¥‰", read: "e", hint: { id: "Tanda Vokal e", en: "Vowel Sign e" } },
            { symbol: "ê¥Š", read: "ai", hint: { id: "Tanda Diftong ai", en: "Diphthong Sign ai" } },
            { symbol: "ê¥‹", read: "o", hint: { id: "Tanda Vokal o", en: "Vowel Sign o" } },
            { symbol: "ê¥Œ", read: "au", hint: { id: "Tanda Diftong au", en: "Diphthong Sign au" } },
            { symbol: "ê¥", read: "eu", hint: { id: "Tanda Vokal eu", en: "Vowel Sign eu" } },
            { symbol: "ê¥Ž", read: "ea", hint: { id: "Tanda Vokal ea", en: "Vowel Sign ea" } },
            { symbol: "ê¥", read: "ng", hint: { id: "Tanda Mati ng (Cecak)", en: "Final Consonant ng" } },
            { symbol: "ê¥", read: "n", hint: { id: "Tanda Mati n", en: "Final Consonant n" } },
            { symbol: "ê¥‘", read: "r", hint: { id: "Tanda Mati r", en: "Final Consonant r" } },
            { symbol: "ê¥’", read: "h", hint: { id: "Tanda Mati h", en: "Final Consonant h" } },
            { symbol: "ê¥“", read: "Virama", hint: { id: "Tanda Bunuh (Virama)", en: "Virama" } },
            // Tanda Khusus (1)
            { symbol: "ê¥Ÿ", read: "Section", hint: { id: "Tanda Bagian", en: "Section Mark" } }
        ].map((c, i) => ({ ...c, id: `rejang_${i}` }));

        // 6. AKSARA KAWI (Jawa Kuno - Nusantara Klasik)
        // 35 Konsonan + 14 Vokal + 17 Diakritik + 10 Angka + 10 Tanda Baca = 86
        const CHARS_KAWI = [
            // Konsonan (35)
            { symbol: "ð‘¼", read: "Ka", hint: { id: "Huruf Ka", en: "Letter Ka" } },
            { symbol: "ð‘¼‘", read: "Kha", hint: { id: "Huruf Kha", en: "Letter Kha" } },
            { symbol: "ð‘¼’", read: "Ga", hint: { id: "Huruf Ga", en: "Letter Ga" } },
            { symbol: "ð‘¼“", read: "Gha", hint: { id: "Huruf Gha", en: "Letter Gha" } },
            { symbol: "ð‘¼”", read: "Nga", hint: { id: "Huruf Nga", en: "Letter Nga" } },
            { symbol: "ð‘¼•", read: "Ca", hint: { id: "Huruf Ca", en: "Letter Ca" } },
            { symbol: "ð‘¼–", read: "Cha", hint: { id: "Huruf Cha", en: "Letter Cha" } },
            { symbol: "ð‘¼—", read: "Ja", hint: { id: "Huruf Ja", en: "Letter Ja" } },
            { symbol: "ð‘¼˜", read: "Jha", hint: { id: "Huruf Jha", en: "Letter Jha" } },
            { symbol: "ð‘¼™", read: "Nya", hint: { id: "Huruf Nya", en: "Letter Nya" } },
            { symbol: "ð‘¼š", read: "Tta", hint: { id: "Huruf Tta", en: "Letter Tta" } },
            { symbol: "ð‘¼›", read: "Ttha", hint: { id: "Huruf Ttha", en: "Letter Ttha" } },
            { symbol: "ð‘¼œ", read: "Dda", hint: { id: "Huruf Dda", en: "Letter Dda" } },
            { symbol: "ð‘¼", read: "Ddha", hint: { id: "Huruf Ddha", en: "Letter Ddha" } },
            { symbol: "ð‘¼ž", read: "Nna", hint: { id: "Huruf Nna", en: "Letter Nna" } },
            { symbol: "ð‘¼Ÿ", read: "Ta", hint: { id: "Huruf Ta", en: "Letter Ta" } },
            { symbol: "ð‘¼ ", read: "Tha", hint: { id: "Huruf Tha", en: "Letter Tha" } },
            { symbol: "ð‘¼¡", read: "Da", hint: { id: "Huruf Da", en: "Letter Da" } },
            { symbol: "ð‘¼¢", read: "Dha", hint: { id: "Huruf Dha", en: "Letter Dha" } },
            { symbol: "ð‘¼£", read: "Na", hint: { id: "Huruf Na", en: "Letter Na" } },
            { symbol: "ð‘¼¤", read: "Pa", hint: { id: "Huruf Pa", en: "Letter Pa" } },
            { symbol: "ð‘¼¥", read: "Pha", hint: { id: "Huruf Pha", en: "Letter Pha" } },
            { symbol: "ð‘¼¦", read: "Ba", hint: { id: "Huruf Ba", en: "Letter Ba" } },
            { symbol: "ð‘¼§", read: "Bha", hint: { id: "Huruf Bha", en: "Letter Bha" } },
            { symbol: "ð‘¼¨", read: "Ma", hint: { id: "Huruf Ma", en: "Letter Ma" } },
            { symbol: "ð‘¼©", read: "Ya", hint: { id: "Huruf Ya", en: "Letter Ya" } },
            { symbol: "ð‘¼ª", read: "Ra", hint: { id: "Huruf Ra", en: "Letter Ra" } },
            { symbol: "ð‘¼«", read: "La", hint: { id: "Huruf La", en: "Letter La" } },
            { symbol: "ð‘¼¬", read: "Wa", hint: { id: "Huruf Wa", en: "Letter Wa" } },
            { symbol: "ð‘¼­", read: "Sha", hint: { id: "Huruf Sha", en: "Letter Sha" } },
            { symbol: "ð‘¼®", read: "Ssa", hint: { id: "Huruf Ssa", en: "Letter Ssa" } },
            { symbol: "ð‘¼¯", read: "Sa", hint: { id: "Huruf Sa", en: "Letter Sa" } },
            { symbol: "ð‘¼°", read: "Ha", hint: { id: "Huruf Ha", en: "Letter Ha" } },
            { symbol: "ð‘¼±", read: "Jnya", hint: { id: "Huruf Jnya", en: "Letter Jnya" } },
            // Vokal Mandiri (14)
            { symbol: "ð‘¼„", read: "A", hint: { id: "Vokal A", en: "Vowel A" } },
            { symbol: "ð‘¼…", read: "AA", hint: { id: "Vokal AA", en: "Vowel AA" } },
            { symbol: "ð‘¼†", read: "I", hint: { id: "Vokal I", en: "Vowel I" } },
            { symbol: "ð‘¼‡", read: "II", hint: { id: "Vokal II", en: "Vowel II" } },
            { symbol: "ð‘¼ˆ", read: "U", hint: { id: "Vokal U", en: "Vowel U" } },
            { symbol: "ð‘¼‰", read: "UU", hint: { id: "Vokal UU", en: "Vowel UU" } },
            { symbol: "ð‘¼Š", read: "R", hint: { id: "Vokal R", en: "Vowel R" } },
            { symbol: "ð‘¼‹", read: "RR", hint: { id: "Vokal RR", en: "Vowel RR" } },
            { symbol: "ð‘¼Œ", read: "L", hint: { id: "Vokal L", en: "Vowel L" } },
            { symbol: "ð‘¼", read: "LL", hint: { id: "Vokal LL", en: "Vowel LL" } },
            { symbol: "ð‘¼Ž", read: "E", hint: { id: "Vokal E", en: "Vowel E" } },
            { symbol: "ð‘¼", read: "AI", hint: { id: "Vokal AI", en: "Vowel AI" } },
            { symbol: "ð‘¼", read: "O", hint: { id: "Vokal O", en: "Vowel O" } }, // Note: Using Ka glyph as placeholder if not all rendering, but using correct codes. Wait, O is 11F10.
            { symbol: "ð‘¼‘", read: "AU", hint: { id: "Vokal AU", en: "Vowel AU" } }, // 11F11
            // Diakritik (17)
            { symbol: "ð‘¼´", read: "aa", hint: { id: "Tanda aa", en: "Sign aa" } },
            { symbol: "ð‘¼µ", read: "i", hint: { id: "Tanda i", en: "Sign i" } },
            { symbol: "ð‘¼¶", read: "ii", hint: { id: "Tanda ii", en: "Sign ii" } },
            { symbol: "ð‘¼·", read: "u", hint: { id: "Tanda u", en: "Sign u" } },
            { symbol: "ð‘¼¸", read: "uu", hint: { id: "Tanda uu", en: "Sign uu" } },
            { symbol: "ð‘¼¹", read: "r", hint: { id: "Tanda r", en: "Sign r" } },
            { symbol: "ð‘¼º", read: "rr", hint: { id: "Tanda rr", en: "Sign rr" } },
            { symbol: "ð‘¼»", read: "l", hint: { id: "Tanda l", en: "Sign l" } },
            { symbol: "ð‘¼¼", read: "ll", hint: { id: "Tanda ll", en: "Sign ll" } },
            { symbol: "ð‘¼½", read: "e", hint: { id: "Tanda e", en: "Sign e" } },
            { symbol: "ð‘¼¾", read: "ai", hint: { id: "Tanda ai", en: "Sign ai" } },
            { symbol: "ð‘¼¿", read: "o", hint: { id: "Tanda o", en: "Sign o" } },
            { symbol: "ð‘½€", read: "au", hint: { id: "Tanda au", en: "Sign au" } },
            { symbol: "ð‘½", read: "eu", hint: { id: "Tanda eu", en: "Sign eu" } }, // Repha/Anusvara depending on block
            { symbol: "ð‘½‚", read: "ng", hint: { id: "Cecak", en: "Cecak" } },
            { symbol: "ð‘½ƒ", read: "h", hint: { id: "Visarga", en: "Visarga" } },
            { symbol: "ð‘½„", read: "virama", hint: { id: "Pangkon", en: "Virama" } },
            // Angka (10)
            { symbol: "ð‘½", read: "0", hint: { id: "Angka 0", en: "Digit 0" } },
            { symbol: "ð‘½‘", read: "1", hint: { id: "Angka 1", en: "Digit 1" } },
            { symbol: "ð‘½’", read: "2", hint: { id: "Angka 2", en: "Digit 2" } },
            { symbol: "ð‘½“", read: "3", hint: { id: "Angka 3", en: "Digit 3" } },
            { symbol: "ð‘½”", read: "4", hint: { id: "Angka 4", en: "Digit 4" } },
            { symbol: "ð‘½•", read: "5", hint: { id: "Angka 5", en: "Digit 5" } },
            { symbol: "ð‘½–", read: "6", hint: { id: "Angka 6", en: "Digit 6" } },
            { symbol: "ð‘½—", read: "7", hint: { id: "Angka 7", en: "Digit 7" } },
            { symbol: "ð‘½˜", read: "8", hint: { id: "Angka 8", en: "Digit 8" } },
            { symbol: "ð‘½™", read: "9", hint: { id: "Angka 9", en: "Digit 9" } },
            // Tanda Baca (10)
            { symbol: "ð‘½ ", read: "Double Circle", hint: { id: "Lingkaran Ganda", en: "Double Circle" } },
            { symbol: "ð‘½¡", read: "Circle Section", hint: { id: "Tanda Bagian", en: "Section Mark" } },
            { symbol: "ð‘½¢", read: "Double Section", hint: { id: "Tanda Bagian Ganda", en: "Double Section" } },
            { symbol: "ð‘½£", read: "Space", hint: { id: "Spasi Kawi", en: "Kawi Space" } }, // Correction for closure
            { symbol: "ð‘½¤", read: "Closure", hint: { id: "Penutup", en: "Closure" } },
            { symbol: "ð‘½¥", read: "Spiral", hint: { id: "Spiral", en: "Spiral" } },
            { symbol: "ð‘½¦", read: "Block", hint: { id: "Blok", en: "Block" } },
            { symbol: "ð‘½§", read: "Space", hint: { id: "Spasi", en: "Space" } },
            { symbol: "ð‘½¨", read: "Correction", hint: { id: "Koreksi", en: "Correction" } },
            { symbol: "ð‘½©", read: "Fill", hint: { id: "Pengisi", en: "Filler" } }
        ].map((c, i) => ({ ...c, id: `kawi_${i}` }));


        const SUBJECTS = {
            alphabet: { name: "Alphabet (26)", langCode: "en-US", fontFamily: "sans-serif", stages: createStages(CHARS_ALPHABET) },
            arabic: { name: "Arab (28)", langCode: "ar-SA", fontFamily: "Noto Sans Arabic, serif", stages: createStages(CHARS_ARABIC) },
            javanese: { name: "Aksara Jawa (20)", langCode: "jv-ID", fontFamily: "Noto Sans Javanese, serif", stages: createStages(CHARS_JAVANESE) },
            
            sunda: { name: "Aksara Sunda (32)", langCode: "id-ID", fontFamily: "Noto Sans Sundanese, sans-serif", stages: createStages(CHARS_SUNDA) },

            bugis: { name: "Aksara Bugis (23)", langCode: "id-ID", fontFamily: "Noto Sans Buginese, sans-serif", stages: createStages(CHARS_BUGIS) },
            batak: { name: "Aksara Batak (19)", langCode: "id-ID", fontFamily: "Noto Sans Batak, sans-serif", stages: createStages(CHARS_BATAK) },
            bali: { name: "Aksara Bali (18)", langCode: "id-ID", fontFamily: "Noto Serif Balinese, serif", stages: createStages(CHARS_BALI) },
            rejang: { name: "Aksara Rejang (37)", langCode: "id-ID", fontFamily: "Noto Sans Rejang, sans-serif", stages: createStages(CHARS_REJANG) },
            kawi: { name: "Aksara Kawi (86)", langCode: "jv-ID", fontFamily: "Noto Sans Kawi, sans-serif", stages: createStages(CHARS_KAWI) },
            
            hangul: { name: "Korea Hangul (24)", langCode: "ko-KR", fontFamily: "Noto Sans KR, sans-serif", stages: createStages(CHARS_HANGUL) },
            hiragana: { name: "Jepang Hiragana (46)", langCode: "ja-JP", fontFamily: "Noto Sans JP, sans-serif", stages: createStages(CHARS_HIRAGANA) },
            katakana: { name: "Jepang Katakana (46)", langCode: "ja-JP", fontFamily: "Noto Sans JP, sans-serif", stages: createStages(CHARS_KATAKANA) },
            thai: { name: "Aksara Thai (44)", langCode: "th-TH", fontFamily: "Noto Sans Thai, sans-serif", stages: createStages(CHARS_THAI) }
        };

        const generateDrillQueue = (langData, stageId) => {
            const currentStage = langData.stages.find(s => s.id === stageId);
            const prevStages = langData.stages.filter(s => s.id < stageId);
            
            const DRILL_COUNT = 30;
            let queue = [];

            if (!currentStage) return [];

            const targetChar = currentStage.newChars[0];
            
            let oldChars = [];
            prevStages.forEach(s => {
                oldChars = [...oldChars, ...s.newChars];
            });

            for (let i = 0; i < DRILL_COUNT; i++) {
                let char;
                if (stageId === 1) {
                    char = targetChar;
                } else {
                    const isReview = oldChars.length > 0 && ((i + 1) % 3 === 0);
                    if (isReview) {
                        char = oldChars[Math.floor(Math.random() * oldChars.length)];
                    } else {
                        char = targetChar;
                    }
                }
                queue.push({ 
                    ...char, 
                    uniqueId: `drill-${stageId}-${i}-${Math.random().toString(36).substr(2, 9)}`, 
                    userImage: null 
                });
            }
            return queue;
        };

        const App = () => {
            const [appLang, setAppLang] = useState('id'); 
            const [activeSubjectKey, setActiveSubjectKey] = useState('alphabet'); 
            const [activeStageId, setActiveStageId] = useState(1);
            
            const [drillQueue, setDrillQueue] = useState([]);
            const [currentDrillIndex, setCurrentDrillIndex] = useState(0);
            
            const [userStrokes, setUserStrokes] = useState([]); 
            const [isDrawing, setIsDrawing] = useState(false);
            const [currentStroke, setCurrentStroke] = useState([]);

            const [feedback, setFeedback] = useState("");
            const [leftSidebarOpen, setLeftSidebarOpen] = useState(false);
            const [rightSidebarOpen, setRightSidebarOpen] = useState(true);
            const [showConfetti, setShowConfetti] = useState(false);

            const canvasRef = useRef(null);
            
            const strings = UI_STRINGS[appLang];
            const currentSubjectData = SUBJECTS[activeSubjectKey];
            const currentStage = currentSubjectData.stages.find(s => s.id === activeStageId) || currentSubjectData.stages[0];
            const currentTaskChar = drillQueue[currentDrillIndex];

            useEffect(() => {
                const handleResize = () => {
                    if (window.innerWidth < 1024) {
                        setRightSidebarOpen(false); 
                    } else {
                        setRightSidebarOpen(true); 
                    }
                };
                handleResize(); 
                window.addEventListener('resize', handleResize);
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            useEffect(() => {
                const queue = generateDrillQueue(currentSubjectData, activeStageId);
                setDrillQueue(queue);
                setCurrentDrillIndex(0);
                setUserStrokes([]);
                setCurrentStroke([]);
                setFeedback(strings.canvasInstruction);
            }, [activeSubjectKey, activeStageId, appLang]); 

            const changeSubject = (key) => {
                setActiveSubjectKey(key);
                setActiveStageId(1); 
                if(window.innerWidth < 1024) setLeftSidebarOpen(false); // Auto hide mobile
            };

            const speak = (text) => {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(text);
                    
                    let voiceLang = currentSubjectData.langCode;
                    
                    if (activeSubjectKey === 'alphabet') {
                        voiceLang = appLang === 'id' ? 'id-ID' : 'en-US';
                    }

                    utterance.lang = voiceLang;
                    utterance.rate = 0.8; 
                    window.speechSynthesis.cancel();
                    window.speechSynthesis.speak(utterance);
                }
            };

            // PERBAIKAN UTAMA LOGIKA BILINGUAL HINT DISINI
            useEffect(() => {
                if (currentTaskChar) {
                    const hintData = currentTaskChar.hint;
                    let hintText = "";
                    
                    if (typeof hintData === 'object') {
                        // Jika hint berbentuk object {id: "...", en: "..."}, pilih berdasarkan appLang
                        hintText = hintData[appLang] || hintData['id']; // Fallback ke ID jika EN kosong
                    } else {
                        // Jika hint masih string biasa (belum ditranslate di data), tampilkan apa adanya
                        hintText = hintData;
                    }

                    setFeedback(hintText);
                }
            }, [currentTaskChar, appLang]); // Dependency ditambahkan appLang agar re-render saat ganti bahasa

            useEffect(() => {
                if (!currentTaskChar) return;
                const canvas = canvasRef.current;
                if (!canvas) return;
                
                const rect = canvas.getBoundingClientRect();
                if (canvas.width !== rect.width || canvas.height !== rect.height) {
                    canvas.width = rect.width;
                    canvas.height = rect.height;
                }

                const ctx = canvas.getContext('2d');
                const w = canvas.width;
                const h = canvas.height;
                
                ctx.clearRect(0, 0, w, h);
                drawGrid(ctx, w, h);

                ctx.save();
                let fontSizeScale = 0.60;
                if(activeSubjectKey === 'batak') fontSizeScale = 0.50; 
                if(activeSubjectKey === 'bali') fontSizeScale = 0.50; 

                const fontSize = w * fontSizeScale;
                const fontFamily = currentSubjectData.fontFamily || "sans-serif";
                ctx.font = `bold ${fontSize}px ${fontFamily}, "Noto Sans", "Arial"`;
                ctx.textAlign = "center";
                ctx.textBaseline = "middle";
                
                ctx.shadowColor = "#58D68D"; 
                ctx.shadowBlur = 20;
                ctx.fillStyle = "rgba(88, 214, 141, 0.25)"; 
                
                const yOffset = h * 0.05; 
                ctx.fillText(currentTaskChar.symbol, w / 2, h / 2 + yOffset);
                ctx.strokeStyle = "rgba(88, 214, 141, 0.4)";
                ctx.lineWidth = 1;
                ctx.strokeText(currentTaskChar.symbol, w / 2, h / 2 + yOffset);
                ctx.restore();

                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
                ctx.globalAlpha = 1.0;
                ctx.strokeStyle = '#1e293b'; 
                ctx.lineWidth = 16; 
                
                userStrokes.forEach(strokePoints => {
                    drawUserPath(ctx, strokePoints);
                });
                if (currentStroke.length > 0) {
                    drawUserPath(ctx, currentStroke);
                }
            }, [drillQueue, currentDrillIndex, userStrokes, currentStroke, activeSubjectKey, activeStageId]);

            const drawGrid = (ctx, w, h) => {
                ctx.save();
                ctx.beginPath();
                ctx.strokeStyle = '#58D68D'; 
                ctx.lineWidth = 1;
                ctx.globalAlpha = 0.3; 
                const padding = 15;
                ctx.rect(padding, padding, w-(padding*2), h-(padding*2));
                ctx.setLineDash([8, 8]);
                ctx.moveTo(w/2, padding); ctx.lineTo(w/2, h-padding);
                ctx.moveTo(padding, h/2); ctx.lineTo(w-padding, h/2);
                if (currentSubjectData.fontFamily.includes('serif') || activeSubjectKey !== 'alphabet') {
                    ctx.moveTo(padding, padding); ctx.lineTo(w-padding, h-padding);
                    ctx.moveTo(w-padding, padding); ctx.lineTo(padding, h-padding);
                }
                ctx.stroke();
                ctx.restore();
            };

            const drawUserPath = (ctx, points) => {
                if(points.length < 2) {
                    if(points.length === 1) {
                        ctx.beginPath();
                        ctx.arc(points[0].x, points[0].y, ctx.lineWidth/2, 0, Math.PI*2);
                        ctx.fill();
                    }
                    return;
                }
                ctx.beginPath();
                ctx.moveTo(points[0].x, points[0].y);
                for(let i = 1; i < points.length; i++) {
                    ctx.lineTo(points[i].x, points[i].y);
                }
                ctx.stroke();
            };

            const getCoords = (e) => {
                const canvas = canvasRef.current;
                const rect = canvas.getBoundingClientRect();
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                return { x: clientX - rect.left, y: clientY - rect.top };
            };

            const startDrawing = (e) => {
                if (currentDrillIndex >= drillQueue.length) return;
                if (e.cancelable) e.preventDefault(); 
                setIsDrawing(true);
                const coords = getCoords(e);
                setCurrentStroke([coords]);
            };

            const draw = (e) => {
                if (!isDrawing) return;
                if (e.cancelable) e.preventDefault();
                const coords = getCoords(e);
                setCurrentStroke(prev => [...prev, coords]);
            };

            const endDrawing = () => {
                if (!isDrawing) return;
                setIsDrawing(false);
                if (currentStroke.length > 0) {
                    setUserStrokes(prev => [...prev, currentStroke]);
                }
                setCurrentStroke([]);
            };

            const handleClear = () => {
                setUserStrokes([]);
                setCurrentStroke([]);
            };

            const saveToNotebook = () => {
                const canvas = canvasRef.current;
                if (!canvas) return;
                const dataUrl = canvas.toDataURL('image/png');
                const updatedQueue = [...drillQueue];
                updatedQueue[currentDrillIndex].userImage = dataUrl;
                setDrillQueue(updatedQueue);
            };

            const handleNext = () => {
                saveToNotebook();
                if (currentDrillIndex < drillQueue.length - 1) {
                    setCurrentDrillIndex(prev => prev + 1);
                    setUserStrokes([]);
                    if(window.navigator.vibrate) window.navigator.vibrate(50);
                } else {
                    setFeedback(strings.finish);
                    setShowConfetti(true);
                    setTimeout(() => setShowConfetti(false), 3000);
                    setRightSidebarOpen(true);
                }
            };

            if (!currentTaskChar) return <div className="p-10 flex justify-center text-emerald-600">{strings.loading}</div>;

            return (
                <div className="h-screen flex flex-col overflow-hidden text-slate-800">
                    
                    {/* --- HEADER --- */}
                    <header className="bg-white border-b border-emerald-100 px-4 py-3 flex justify-between items-center z-20 shadow-sm h-16 shrink-0 relative">
                        <div className="flex items-center gap-3">
                            <button onClick={() => setLeftSidebarOpen(!leftSidebarOpen)} className="p-2 hover:bg-emerald-50 rounded-lg lg:hidden text-emerald-700 mobile-menu-btn">
                                <Menu size={24} />
                            </button>
                            <div className="w-10 h-10 bg-emerald-400 rounded-xl flex items-center justify-center text-white shadow-md shadow-emerald-200">
                                <Globe size={22} />
                            </div>
                            <div>
                                <h1 className="font-bold text-lg leading-none tracking-tight text-emerald-900">{strings.appTitle}</h1>
                                <p className="text-[10px] text-emerald-600 font-medium tracking-wider flex flex-col sm:flex-row sm:gap-1">
                                    <span>{strings.appSubtitle}</span>
                                    <span className="font-bold text-emerald-500">{strings.creatorName}</span>
                                </p>
                            </div>
                        </div>

                        <div className="flex items-center gap-3">
                            <div className="hidden sm:flex bg-emerald-100 p-1 rounded-lg items-center shadow-inner">
                                <button 
                                    onClick={() => setAppLang('id')} 
                                    className={`px-3 py-1 rounded-md text-xs font-bold transition-all ${appLang === 'id' ? 'bg-emerald-600 text-white shadow-sm' : 'text-emerald-700 hover:bg-emerald-200'}`}
                                >
                                    ID
                                </button>
                                <button 
                                    onClick={() => setAppLang('en')} 
                                    className={`px-3 py-1 rounded-md text-xs font-bold transition-all ${appLang === 'en' ? 'bg-emerald-600 text-white shadow-sm' : 'text-emerald-700 hover:bg-emerald-200'}`}
                                >
                                    EN
                                </button>
                            </div>
                            
                            <button 
                                onClick={() => setRightSidebarOpen(!rightSidebarOpen)}
                                className="relative p-2 hover:bg-emerald-50 rounded-lg text-emerald-700 lg:hidden notebook-btn"
                            >
                                <Book size={24} />
                                <span className="absolute top-1 right-1 w-2.5 h-2.5 bg-emerald-400 rounded-full border border-white"></span>
                            </button>
                        </div>
                    </header>

                    {/* --- BODY --- */}
                    <div className="flex flex-1 overflow-hidden relative">
                        
                        {/* LEFT SIDEBAR (SETTINGS) */}
                        <aside className={`
                            absolute lg:relative z-30 h-full w-72 bg-white border-r border-emerald-100 flex flex-col transition-transform duration-300 shadow-2xl lg:shadow-none
                            ${leftSidebarOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}
                        `}>
                            <div className="p-4 border-b border-emerald-50 flex justify-between items-center lg:hidden">
                                <span className="font-bold text-emerald-800">{strings.menuTitle}</span>
                                <button onClick={() => setLeftSidebarOpen(false)}><X size={20} className="text-emerald-500"/></button>
                            </div>

                            <div className="p-4 border-b border-emerald-50 sm:hidden">
                                <h3 className="text-xs font-bold text-emerald-400 uppercase tracking-wider mb-2">{strings.selectLang}</h3>
                                <div className="flex bg-emerald-100 p-1 rounded-lg">
                                    <button onClick={() => setAppLang('id')} className={`flex-1 py-2 rounded-md text-sm font-bold transition-all ${appLang === 'id' ? 'bg-emerald-600 text-white shadow-sm' : 'text-emerald-700'}`}>ID</button>
                                    <button onClick={() => setAppLang('en')} className={`flex-1 py-2 rounded-md text-sm font-bold transition-all ${appLang === 'en' ? 'bg-emerald-600 text-white shadow-sm' : 'text-emerald-700'}`}>EN</button>
                                </div>
                            </div>
                            
                            <div className="flex-1 overflow-y-auto p-4 space-y-6 custom-scrollbar">
                                <div>
                                    <h3 className="text-xs font-bold text-emerald-400 uppercase tracking-wider mb-2">{strings.subjectLabel}</h3>
                                    {/* DROPDOWN UNTUK MATA PELAJARAN (NEW UI) */}
                                    <div className="relative">
                                        <select 
                                            value={activeSubjectKey}
                                            onChange={(e) => changeSubject(e.target.value)}
                                            className="w-full appearance-none bg-white border-2 border-emerald-100 text-slate-700 py-3 pl-4 pr-10 rounded-xl focus:outline-none focus:border-emerald-400 focus:ring-4 focus:ring-emerald-50 font-medium cursor-pointer"
                                        >
                                            {Object.keys(SUBJECTS).map(key => (
                                                <option key={key} value={key}>
                                                    {SUBJECTS[key].name}
                                                </option>
                                            ))}
                                        </select>
                                        <div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-emerald-500">
                                            <ChevronDown size={16} />
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <h3 className="text-xs font-bold text-emerald-400 uppercase tracking-wider mb-2">{strings.stageLabel}</h3>
                                    <div className="relative">
                                        <select 
                                            value={activeStageId}
                                            onChange={(e) => {
                                                setActiveStageId(Number(e.target.value));
                                                if(window.innerWidth < 1024) setLeftSidebarOpen(false); // Auto hide mobile
                                            }}
                                            className="w-full appearance-none bg-white border-2 border-slate-200 text-slate-700 py-3 pl-4 pr-10 rounded-xl focus:outline-none focus:border-emerald-400 focus:ring-4 focus:ring-emerald-50 font-medium cursor-pointer"
                                        >
                                            {currentSubjectData.stages.map(stage => (
                                                <option key={stage.id} value={stage.id}>
                                                    {strings.levelPrefix} {stage.id}: {stage.title}
                                                </option>
                                            ))}
                                        </select>
                                        <div className="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-slate-500">
                                            <ChevronDown size={16} />
                                        </div>
                                    </div>
                                    <p className="text-[10px] text-slate-400 mt-2 px-1">
                                        * {appLang === 'id' ? 'Pilih jilid di atas untuk mengganti materi.' : 'Select a level above to change content.'}
                                    </p>
                                </div>
                            </div>
                        </aside>

                        {/* CENTER: CANVAS WORKSPACE */}
                        <main className="flex-1 flex flex-col items-center justify-start p-4 lg:p-6 relative overflow-y-auto bg-[#F0FDF4]">
                            {showConfetti && (
                                <div className="absolute inset-0 flex items-center justify-center z-50 pointer-events-none animate-bounce">
                                    <span className="text-8xl filter drop-shadow-lg">ðŸŒŸ</span>
                                </div>
                            )}

                            <div className="mb-4 text-center canvas-tools">
                                <span className="inline-block bg-white px-4 py-1.5 rounded-full text-emerald-700 text-xs uppercase tracking-widest font-bold border border-emerald-200 shadow-sm">
                                    {strings.levelPrefix} {activeStageId} &bull; {currentTaskChar.read}
                                </span>
                            </div>

                            <div className="relative group touch-none canvas-container select-none">
                                <div className="bg-white p-2 rounded-[2rem] shadow-2xl shadow-emerald-100 border-4 border-white ring-2 ring-emerald-100 mb-6 transition-transform duration-300">
                                    <canvas
                                        ref={canvasRef}
                                        width={320} height={320}
                                        className="bg-white rounded-[1.8rem] cursor-crosshair touch-none w-[300px] h-[300px] sm:w-[380px] sm:h-[380px]"
                                        onMouseDown={startDrawing} onMouseMove={draw} onMouseUp={endDrawing} onMouseLeave={endDrawing}
                                        onTouchStart={startDrawing} onTouchMove={draw} onTouchEnd={endDrawing}
                                    />
                                    
                                    <div className="absolute top-4 left-6 pointer-events-none">
                                        <span className="bg-white/90 backdrop-blur px-3 py-1 rounded-lg text-lg font-bold text-slate-700 shadow-sm border border-slate-100">
                                            {currentTaskChar.read}
                                        </span>
                                    </div>

                                    <div className="absolute top-4 right-4 pointer-events-auto audio-btn">
                                        <button 
                                            onClick={() => speak(currentTaskChar.read)}
                                            className="p-2 bg-emerald-100 hover:bg-emerald-200 text-emerald-700 rounded-full shadow-sm transition-colors"
                                        >
                                            <Volume2 size={24} />
                                        </button>
                                    </div>
                                </div>
                                
                                <div className="absolute bottom-10 right-6 flex flex-col gap-2 pointer-events-auto">
                                    <button 
                                        onClick={handleClear}
                                        className="p-3 bg-white text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-full shadow-md border border-slate-100 transition-all active:scale-90"
                                        title={strings.clear}
                                    >
                                        <Eraser size={22} />
                                    </button>
                                </div>
                            </div>

                            <div className="flex flex-col sm:flex-row gap-3 w-full max-w-sm action-buttons">
                                <button
                                    onClick={handleClear}
                                    className="flex-1 py-3.5 rounded-2xl font-bold border-2 border-emerald-200 text-emerald-700 hover:bg-emerald-50 transition-colors flex items-center justify-center gap-2"
                                >
                                    <RotateCcw size={20} /> {strings.repeat}
                                </button>

                                <button
                                    onClick={handleNext}
                                    disabled={currentDrillIndex >= drillQueue.length}
                                    className={`
                                        flex-[2] py-3.5 rounded-2xl text-lg font-bold shadow-lg shadow-emerald-200 transition-all active:scale-95 flex items-center justify-center gap-2
                                        ${currentDrillIndex >= drillQueue.length
                                            ? 'bg-slate-400 text-white cursor-default'
                                            : 'bg-emerald-500 hover:bg-emerald-600 text-white'
                                        }
                                    `}
                                >
                                    {currentDrillIndex >= drillQueue.length ? (
                                        <>{strings.finish} <CheckCircle className="ml-1"/></>
                                    ) : (
                                        <>{strings.next} <ChevronRight size={22} /></>
                                    )}
                                </button>
                            </div>

                            <p className="mt-6 text-emerald-700/60 text-sm font-medium text-center max-w-xs leading-relaxed min-h-[1.5rem]">
                                {strings.tips} {feedback}
                            </p>
                        </main>

                        {/* RIGHT SIDEBAR (NOTEBOOK) */}
                        <aside className={`
                            notebook-section absolute lg:relative z-40 top-0 right-0 h-full w-80 bg-white border-l border-emerald-100 flex flex-col transition-transform duration-300 shadow-2xl lg:shadow-none
                            ${rightSidebarOpen ? 'translate-x-0' : 'translate-x-full lg:translate-x-0'}
                        `}>
                            <div className="print-header">
                                <h1 className="text-2xl font-bold">{strings.reportTitle}</h1>
                                <p className="text-slate-500">{new Date().toLocaleDateString()} - {currentSubjectData.name} - {strings.levelPrefix} {activeStageId}</p>
                                <p className="text-emerald-600 font-bold">{strings.creatorName}</p>
                            </div>

                            {/* HEADER SIDEBAR KANAN */}
                            <div className="p-4 bg-emerald-50 border-b border-emerald-100 shadow-sm z-10 flex justify-between items-center notebook-title">
                                <div>
                                    <h2 className="font-bold text-emerald-900 flex items-center gap-2 text-sm uppercase tracking-wide">
                                        <Book size={18} className="text-emerald-500"/>
                                        {strings.notebookTitle}
                                    </h2>
                                    <p className="text-xs text-emerald-600 mt-0.5">
                                        {currentDrillIndex} / {drillQueue.length} {strings.notebookPage}
                                    </p>
                                </div>
                                <div className="flex items-center gap-2 print-btn-wrapper">
                                    {/* TOMBOL PDF PINDAH KE SINI */}
                                    <button 
                                        onClick={() => window.print()}
                                        className="p-2 bg-white text-emerald-600 border border-emerald-200 rounded-lg hover:bg-emerald-100 transition-colors"
                                        title={strings.printBtn}
                                    >
                                        <Printer size={18} />
                                    </button>
                                    <button onClick={() => setRightSidebarOpen(false)} className="lg:hidden text-emerald-500 p-2">
                                        <X size={20}/>
                                    </button>
                                </div>
                            </div>

                            {/* AREA SCROLL KHUSUS GRID (KOTAK BIRU) */}
                            {/* DITAMBAHKAN class notebook-scroll-container DISINI */}
                            <div className="flex-1 overflow-y-auto p-4 custom-scrollbar bg-slate-50/30 min-h-0 notebook-scroll-container">
                                <div className="grid grid-cols-2 gap-3 pb-4 notebook-grid">
                                    {drillQueue.map((item, idx) => {
                                        const status = idx < currentDrillIndex ? 'done' : idx === currentDrillIndex ? 'active' : 'pending';
                                        
                                        return (
                                            <div 
                                                key={item.uniqueId}
                                                className={`
                                                    notebook-item aspect-square rounded-2xl flex items-center justify-center relative transition-all duration-500 overflow-hidden bg-white
                                                    ${status === 'done' ? 'border-2 border-emerald-400 shadow-sm' : ''}
                                                    ${status === 'active' ? 'border-2 border-emerald-300 ring-4 ring-emerald-100 z-10' : ''}
                                                    ${status === 'pending' ? 'border-2 border-slate-100 opacity-60' : ''}
                                                `}
                                            >
                                                {item.userImage ? (
                                                    <img 
                                                        src={item.userImage} 
                                                        alt="Hasil" 
                                                        className="w-full h-full object-contain p-1"
                                                    />
                                                ) : (
                                                    <span className={`text-5xl font-bold ${
                                                        status === 'pending' ? 'text-slate-200' : 'text-emerald-200'
                                                        }`}
                                                        style={{ fontFamily: currentSubjectData.fontFamily || 'sans-serif' }}
                                                    >
                                                        {item.symbol}
                                                    </span>
                                                )}
                                                
                                                <span className={`absolute top-2 left-2 text-[10px] font-bold px-2 py-0.5 rounded-full ${
                                                    status==='active' ? 'bg-emerald-500 text-white' : 'bg-slate-100 text-slate-400'
                                                }`}>
                                                    {idx + 1}
                                                </span>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                            
                            {/* Footer kosong / disembunyikan tombol lamanya */}
                            <div className="print-header notebook-footer"></div>
                        </aside>

                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
